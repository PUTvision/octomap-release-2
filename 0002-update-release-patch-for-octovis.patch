From b098e65bd9077464b6c0c0b9fa023159bdccd765 Mon Sep 17 00:00:00 2001
From: Ioan Sucan <isucan@willowgarage.com>
Date: Wed, 19 Dec 2012 11:43:58 +0200
Subject: [PATCH 2/2] update release patch for octovis

---
 CMakeLists.txt     |    6 +++++-
 CMakeLists_src.txt |    4 ++--
 2 files changed, 7 insertions(+), 3 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 9a15dc4..75badae 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -1,13 +1,17 @@
 CMAKE_MINIMUM_REQUIRED(VERSION 2.6)
 PROJECT( octovis )
 
-find_package(catkin REQUIRED)
+find_package(catkin REQUIRED COMPONENTS octomap)
 catkin_package(
   INCLUDE_DIRS
     include
   LIBRARIES
     octovis-shared
+  CATKIN_DEPENDS
+    octomap
     )
+include_directories(${catkin_INCLUDE_DIRS})
+link_directories($catkin_LIBRARY_DIRS})
 
 # # version (e.g. for packaging)
 set(OCTOVIS_MAJOR_VERSION 1)
diff --git a/CMakeLists_src.txt b/CMakeLists_src.txt
index 0b28382..cc0ebe4 100644
--- a/CMakeLists_src.txt
+++ b/CMakeLists_src.txt
@@ -74,7 +74,7 @@ target_link_libraries(octovis-static)
 set_target_properties(octovis-static PROPERTIES OUTPUT_NAME octovis)
 
 add_library(octovis-shared SHARED ${viewerlib_SRCS})
-target_link_libraries(octovis-shared ${OPENGL_gl_LIBRARY} ${OPENGL_glu_LIBRARY} octomath octomap ${QGLViewer_LIBRARIES})
+target_link_libraries(octovis-shared ${OPENGL_gl_LIBRARY} ${OPENGL_glu_LIBRARY} ${catkin_LIBRARIES} ${QGLViewer_LIBRARIES})
 set_target_properties(octovis-shared PROPERTIES OUTPUT_NAME octovis)
 
 
@@ -85,7 +85,7 @@ add_executable(octovis ${viewer_SRCS} ${viewer_UIS_H} ${viewer_MOC_SRCS} ${viewe
 target_link_libraries(octovis 
 #  ${QGLViewer_LIBRARIES}
   ${QT_LIBRARIES}
-  ${OCTOMAP_LIBRARIES}
+  ${catkin_LIBRARIES} 
   octovis-shared
 )
 
-- 
1.7.10.2 (Apple Git-33)

